

SQL lite　


-- Tabla de tipos de usuarios
CREATE TABLE tipos_de_usuarios (
    tipo_id INTEGER PRIMARY KEY,
    Nombre_tipo_usuario TEXT NOT NULL
);

-- Tabla de usuarios
CREATE TABLE usuarios (
    id_usuario INTEGER PRIMARY KEY,
    id_tipo INTEGER NOT NULL,
    nombre TEXT NOT NULL,
    contraseña TEXT NOT NULL,
    correo TEXT,
    FOREIGN KEY (id_tipo) REFERENCES tipos_de_usuarios(tipo_id)
);

-- Tabla de tipo de ronda
CREATE TABLE tipo_ronda (
    id_tipo_ronda INTEGER PRIMARY KEY,
    nombre_tipo_ronda TEXT NOT NULL
);

-- Tabla de ronda deseada
CREATE TABLE ronda_deseada (
    id_ronda_deseada INTEGER PRIMARY KEY,
    nombre_ronda TEXT
);

-- Tabla de rondas
CREATE TABLE rondas (
    id_rondas INTEGER PRIMARY KEY,
    id_usuario INTEGER NOT NULL,
    fecha DATE NOT NULL,
    hora_inicio DATETIME NOT NULL,
    hora_fin DATETIME NOT NULL,
    id_tipo_ronda INTEGER NOT NULL,
    id_ronda_deseada INTEGER NOT NULL,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario),
    FOREIGN KEY (id_tipo_ronda) REFERENCES tipo_ronda(id_tipo_ronda),
    FOREIGN KEY (id_ronda_deseada) REFERENCES ronda_deseada(id_ronda_deseada)
);

-- Tabla de coordenadas guardadas
CREATE TABLE coordenadas_guardadas (
    id_coordenada INTEGER PRIMARY KEY,
    nombre_coordenada TEXT,
    longitud REAL NOT NULL,
    latitud REAL NOT NULL
);

-- Tabla de registro de rondas
CREATE TABLE registro_rondas (
    id_usuario INTEGER NOT NULL,
    id_rondas INTEGER,
    hora DATETIME NOT NULL,
    longitud REAL NOT NULL,
    latitud REAL NOT NULL,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario),
    FOREIGN KEY (id_rondas) REFERENCES rondas(id_rondas)
);

-- Tabla de registro de ronda deseada
CREATE TABLE registro_ronda_deseada (
    id_coordenada INTEGER NOT NULL,
    id_ronda_deseada INTEGER NOT NULL,
    FOREIGN KEY (id_coordenada) REFERENCES coordenadas_guardadas(id_coordenada),
    FOREIGN KEY (id_ronda_deseada) REFERENCES ronda_deseada(id_ronda_deseada)
);

-- Tabla de ronda asignada
CREATE TABLE ronda_asignada (
    id_usuario INTEGER NOT NULL,
    id_tipo_ronda INTEGER NOT NULL,
    id_ronda_deseada INTEGER NOT NULL,
    hora_inicio_deseado DATETIME NOT NULL,
    fecha_deseada DATE NOT NULL,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario),
    FOREIGN KEY (id_tipo_ronda) REFERENCES tipo_ronda(id_tipo_ronda),
    FOREIGN KEY (id_ronda_deseada) REFERENCES ronda_deseada(id_ronda_deseada)
);
